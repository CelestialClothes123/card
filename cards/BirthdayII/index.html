<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Happy Birthday!</title>

  <style>
    :root{
      /* æ¨ªæ¿æ¯”ä¾‹ï¼šå®½ > é«˜ */
      --w: 820px;
      --h: 560px;
      --r: 22px;
      --dur: 700ms;
    }

    body{
      margin:0;
      min-height:100vh;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:18px;
      background:#f4f6f9;
      font-family: system-ui, -apple-system, "PingFang SC", "Microsoft YaHei", sans-serif;
    }

    /* é¿å…é¡µé¢é‡Œæœ‰ä»»ä½•â€œè¿”å›é“¾æ¥â€æ ·å¼æ®‹ç•™ï¼ˆå¦‚æœä½ è¯¯æ”¾äº† <a>ï¼‰ */
    a, a:visited{ color: inherit; text-decoration: none; }
    a{ display:none !important; } /* å¦‚æœä½ ç¡®å®ä¸éœ€è¦ä»»ä½•é“¾æ¥ï¼Œå¼ºåˆ¶éšè— */

    .title{
      font-size: 26px;
      font-weight: 650;
      letter-spacing: .4px;
      margin: 0;
    }

    .scene{ perspective: 1400px; }

    .card{
      width: var(--w);
      height: var(--h);
      position: relative;
      transform-style: preserve-3d;
      transition: transform var(--dur) ease;
      cursor: pointer;
      user-select: none;
      border-radius: calc(var(--r) + 2px);
    }

    .face{
      position:absolute;
      inset:0;
      border-radius: var(--r);
      overflow:hidden;
      backface-visibility: hidden;
      box-shadow: 0 20px 55px rgba(0,0,0,.18);
      background:#fff;
    }

    .face img{
      width:100%;
      height:100%;
      display:block;

      /* æ¨ªå›¾æ›´å¸¸ç”¨ï¼šå±…ä¸­è£åˆ‡ */
      object-fit: cover;
      object-position: center center;
    }

    .back{ transform: rotateY(180deg); }

    .tip{
      font-size: 13px;
      letter-spacing: .3px;
      opacity: .65;
      margin: 0;
    }

    /* æ‰‹æœºé€‚é…ï¼šä¿æŒæ¨ªæ¿æ¯”ä¾‹ï¼ˆå®½çº¦ 94vwï¼Œé«˜çº¦ 0.68 å€å®½ï¼‰ */
    @media (max-width: 520px){
      :root{
        --w: 94vw;
        --h: calc(94vw * 0.68);
      }
      .title{ font-size: 22px; }
    }

    @media (prefers-reduced-motion: reduce){
      .card{ transition:none; }
    }
  </style>
</head>

<body>
  <h1 class="title">Happy Birthday! ğŸ‚</h1>

  <div class="scene">
    <div id="card" class="card" tabindex="0" aria-label="Tap to Flip">
      <div class="face front"><img id="imgFront" alt="front"></div>
      <div class="face back"><img id="imgBack" alt="back"></div>
    </div>
  </div>

  <p class="tip">Tap to Flip</p>

  <script>
    (() => {
      const card     = document.getElementById("card");
      const imgFront = document.getElementById("imgFront");
      const imgBack  = document.getElementById("imgBack");

      const urls = ["3.jpg", "4.jpg"];

      let idx = 0;
      let isAnimating = false;
      let flipLeftNext = true;

      imgFront.src = urls[0];
      imgBack.src  = urls[1 % urls.length];

      function flipNext(){
        if (isAnimating) return;
        isAnimating = true;

        const nextIdx = (idx + 1) % urls.length;
        imgBack.src = urls[nextIdx];

        const deg = flipLeftNext ? -180 : 180;
        card.style.transform = `rotateY(${deg}deg)`;

        card.addEventListener("transitionend", function handler(e){
          if (e.propertyName !== "transform") return;
          card.removeEventListener("transitionend", handler);

          idx = nextIdx;
          imgFront.src = urls[idx];
          imgBack.src  = urls[(idx + 1) % urls.length];

          card.style.transition = "none";
          card.style.transform = "rotateY(0deg)";
          void card.offsetWidth;
          card.style.transition = "";

          flipLeftNext = !flipLeftNext;
          isAnimating = false;
        });
      }

      card.addEventListener("click", flipNext);
      card.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          flipNext();
        }
      });
    })();
  </script>
</body>
</html>
